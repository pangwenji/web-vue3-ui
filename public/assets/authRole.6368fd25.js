import{a0 as D,q as E,g as r,S as K,r as n,a8 as O,o as N,i as q,j as t,w as a,U as R,c as z,m as p,t as y,V as F,L as V,R as L}from"./vendor.d1385716.js";import{g as P,u as G}from"./user.3fa1098b.js";import"./index.45f5150f.js";const H={class:"app-container"},J=p("h4",{class:"form-header h4"},"\u57FA\u672C\u4FE1\u606F",-1),M=p("h4",{class:"form-header h4"},"\u89D2\u8272\u4FE1\u606F",-1),Q={style:{"text-align":"center","margin-left":"-120px","margin-top":"30px"}},W=V("\u63D0\u4EA4"),X=V("\u8FD4\u56DE"),Y=D({name:"AuthRole"}),oe=Object.assign(Y,{setup(Z){const g=E(),{proxy:m}=L(),_=r(!0),v=r(0),d=r(1),c=r(10),b=r([]),f=r([]),s=r({nickName:void 0,userName:void 0,userId:void 0});function C(l){m.$refs.roleRef.toggleRowSelection(l)}function S(l){b.value=l.map(e=>e.roleId)}function j(l){return l.roleId}function h(){const l={path:"/system/user"};m.$tab.closeOpenPage(l)}function $(){const l=s.value.userId,e=b.value.join(",");G({userId:l,roleIds:e}).then(u=>{m.$modal.msgSuccess("\u6388\u6743\u6210\u529F"),h()})}return(()=>{const l=g.params&&g.params.userId;l&&(_.value=!0,P(l).then(e=>{s.value=e.user,f.value=e.roles,v.value=f.value.length,K(()=>{f.value.forEach(u=>{u.flag&&m.$refs.roleRef.toggleRowSelection(u)})}),_.value=!1}))})(),(l,e)=>{const u=n("el-input"),w=n("el-form-item"),k=n("el-col"),T=n("el-row"),x=n("el-form"),i=n("el-table-column"),U=n("el-table"),B=n("pagination"),I=n("el-button"),A=O("loading");return N(),q("div",H,[J,t(x,{model:s.value,"label-width":"80px"},{default:a(()=>[t(T,null,{default:a(()=>[t(k,{span:8,offset:2},{default:a(()=>[t(w,{label:"\u7528\u6237\u6635\u79F0",prop:"nickName"},{default:a(()=>[t(u,{modelValue:s.value.nickName,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.nickName=o),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),t(k,{span:8,offset:2},{default:a(()=>[t(w,{label:"\u767B\u5F55\u8D26\u53F7",prop:"userName"},{default:a(()=>[t(u,{modelValue:s.value.userName,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.userName=o),disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),M,R((N(),z(U,{"row-key":j,onRowClick:C,ref:"roleRef",onSelectionChange:S,data:f.value.slice((d.value-1)*c.value,d.value*c.value)},{default:a(()=>[t(i,{label:"\u5E8F\u53F7",width:"55",type:"index",align:"center"},{default:a(o=>[p("span",null,y((d.value-1)*c.value+o.$index+1),1)]),_:1}),t(i,{type:"selection","reserve-selection":!0,width:"55"}),t(i,{label:"\u89D2\u8272\u7F16\u53F7",align:"center",prop:"roleId"}),t(i,{label:"\u89D2\u8272\u540D\u79F0",align:"center",prop:"roleName"}),t(i,{label:"\u6743\u9650\u5B57\u7B26",align:"center",prop:"roleKey"}),t(i,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180"},{default:a(o=>[p("span",null,y(l.parseTime(o.row.createTime)),1)]),_:1})]),_:1},8,["data"])),[[A,_.value]]),R(t(B,{total:v.value,page:d.value,"onUpdate:page":e[2]||(e[2]=o=>d.value=o),limit:c.value,"onUpdate:limit":e[3]||(e[3]=o=>c.value=o)},null,8,["total","page","limit"]),[[F,v.value>0]]),t(x,{"label-width":"100px"},{default:a(()=>[p("div",Q,[t(I,{type:"primary",onClick:e[4]||(e[4]=o=>$())},{default:a(()=>[W]),_:1}),t(I,{onClick:e[5]||(e[5]=o=>h())},{default:a(()=>[X]),_:1})])]),_:1})])}}});export{oe as default};
