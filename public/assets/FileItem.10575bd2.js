import{s as se,u as ae,a7 as ne,h as U,g as p,r as h,o as c,i as d,k as W,c as X,w as u,m as e,p as m,I as f,l as b,j as n,n as B,U as E,V,t as Y,v as le,z as ce,A as ie,S as de}from"./vendor.d1385716.js";import{_ as re}from"./index.a83617fe.js";const a=t=>(ce("data-v-25b80426"),t=t(),ie(),t),ue=["draggable","onDragover"],ve=["onClick"],he=["onClick"],fe=a(()=>e("div",{class:"cover"},null,-1)),pe=a(()=>e("div",{class:"time"},"40\uFF1A20",-1)),ge=a(()=>e("div",{class:"mark"},"\u9632",-1)),me={class:"play"},ke={class:"progress"},_e=a(()=>e("div",{class:"left"},null,-1)),ye=a(()=>e("div",{class:"right"},[e("div",{class:"right-top"}),e("div",{class:"right-bottom"})],-1)),Ce=[_e,ye],be={class:"file-item-info"},we=a(()=>e("div",{class:"avatar"},null,-1)),De={class:"detail"},xe=["onClick"],Me={key:0,class:"desc"},Be=a(()=>e("span",null,"31.20MB ",-1)),Se=a(()=>e("span",{class:"spot"},null,-1)),Ie={class:"comment",title:"\u8BC4\u8BBA"},je=a(()=>e("span",{style:{"margin-left":"2px"}},"0",-1)),Fe={key:1,style:{color:"#409EFF"}},Oe=["onClick"],Re=["onDblclick"],Ee=["onClick"],Ve={class:"file-table-td file-name",style:{width:"41%"}},Te=["onClick"],Ae={class:"info"},Ne={class:"title"},$e=a(()=>e("span",{class:"version"},"v2",-1)),ze={class:"name"},Pe={class:"comment"},He={key:0},Le={key:1,style:{color:"#409EFF"}},Ge=a(()=>e("div",{class:"file-table-td",style:{width:"10%"}},"-",-1)),Ue=a(()=>e("div",{class:"file-table-td",style:{width:"10%"}},"MP4",-1)),We=a(()=>e("div",{class:"file-table-td",style:{width:"10%"}},"3.4MB",-1)),Xe=a(()=>e("div",{class:"file-table-td",style:{width:"10%"}},"\u5C0F\u96F7",-1)),Ye=a(()=>e("div",{class:"file-table-td",style:{width:"14%"}},"2022/04/20 11:55",-1)),qe={class:"file-table-td file-action",style:{width:"5%"}},Je=a(()=>e("div",null,"\u83DC\u5355",-1)),Ke={props:{data:{type:Object,default(){return{}}},type:String,showCheck:{type:Boolean,default:!1}},emits:["onChange"],setup(t,{emit:q}){const S=t,J=se(),I=ae(),K=ne({boundariesElement:"body",placement:"right",modifiers:[{name:"flip",options:{fallbackPlacements:["bottom"]}},{name:"offset",options:{offset:[0,0]}}]}),Q=U(()=>I.state.project.layoutType),Z=U(()=>I.state.app.dragEvent),j=p(),T=p(),k=p(!1),F=p(0),A=p(0),ee=()=>{J.push({path:"/project/file"})},N="project-list-item",g=p(!1),v=p(!1),l=document.createElement("div");l.style.backgroundImage="url(https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg)",l.style.backgroundRepeat="no-repeat",l.style.backgroundSize="100% 100%",l.style.position="fixed",l.style.top="-1000px",l.style.width="50px",l.style.height="50px",l.style.display="none",l.style.borderRadius="5px",document.body.appendChild(l);var _=null;const $=o=>{Z.value===N&&(g.value||(o.preventDefault(),_&&(clearTimeout(_),_=null),v.value=!0))},z=o=>{g.value||(o.preventDefault(),!_&&(_=setTimeout(()=>{v.value=!1},50)))},P=o=>{l.style.display="block",g.value=!0,I.commit("app/DRAG_EVENT",N),o.dataTransfer.setDragImage(l,0,0)},H=o=>{v.value},L=o=>{g.value=!1,v.value=!1,l.style.display="none"},te=()=>{k.value=!0,de(()=>{T.value.focus()})},oe=()=>{k.value=!1},w=()=>{S.data.check=!S.data.check,q("onChange",S.data)},G=o=>{const s=240,D=6750,r=o.offsetX,y=o.target.getBoundingClientRect().width.toFixed(2),O=o.target.getBoundingClientRect().height.toFixed(2),C=y/s*D,x=Math.round(C/O),M=y/x,R=y/100;F.value=C/x*Math.round(r/M),A.value=r/R};return(o,s)=>{const D=h("Check"),r=h("el-icon"),y=h("VideoPlay"),O=h("ChatLineRound"),C=h("MoreFilled"),x=h("el-input"),M=h("el-col"),R=h("el-popover");return c(),d(le,null,[W(Q)=="card"?(c(),X(M,{key:0,xl:4,lg:6,span:6},{default:u(()=>[e("div",{class:m(["file-item-card",{dragAction:g.value,dragOverAction:v.value}]),draggable:!t.showCheck,onClick:ee,onMouseover:s[3]||(s[3]=i=>t.data.checkBox=!0),onMouseleave:s[4]||(s[4]=i=>t.data.checkBox=!1),onDragover:f($,["stop"]),onDragstart:P,onDragend:L,onDragleave:z,onDrop:H},[e("div",{class:m(["file-item-content",{check:t.data.check}])},[t.showCheck?(c(),d("div",{key:0,class:"check-mask",onClick:f(w,["stop"])},null,8,ve)):b("",!0),t.data.checkBox||t.showCheck?(c(),d("div",{key:1,class:m(["file-check",{check:t.data.check}]),onClick:f(w,["stop"])},[n(r,{class:"icon"},{default:u(()=>[n(D)]),_:1})],10,he)):b("",!0),t.type=="video"?(c(),d("div",{key:2,class:"file-item-cover file-item-video",style:B("background-position-y: -"+String(F.value)+"px;"),onMouseover:s[0]||(s[0]=(...i)=>o.handleMouseOver&&o.handleMouseOver(...i)),onMousemove:G},[fe,pe,ge,e("div",me,[n(r,null,{default:u(()=>[n(y)]),_:1})]),e("div",ke,[e("div",{style:B({width:String(A.value)+"%"}),class:"progress-outer"},null,4)])],36)):t.type=="folder"?(c(),d("div",{key:3,class:"file-item-cover file-item-folder",style:B("background-position-y: -"+String(F.value)+"px;"),onMouseover:s[1]||(s[1]=(...i)=>o.handleMouseOver&&o.handleMouseOver(...i)),onMousemove:G},Ce,36)):b("",!0),e("div",be,[we,E(e("div",De,[e("div",{onClick:f(te,["stop"]),class:"title"},Y(t.data.name),9,xe),v.value?(c(),d("div",Fe," \u6DFB\u52A0\u4E3A\u65B0\u7248\u672C ")):(c(),d("div",Me,[Be,Se,e("span",Ie,[n(r,null,{default:u(()=>[n(O)]),_:1}),je])]))],512),[[V,!k.value]]),E(e("div",{class:"menu-open",onClick:f(i=>!1,["stop"]),ref_key:"popoverReference",ref:j},[n(r,null,{default:u(()=>[n(C)]),_:1})],8,Oe),[[V,!k.value]]),E(e("div",{class:"input-box",onDblclick:f(i=>!1,["stop"])},[n(x,{modelValue:t.data.name,"onUpdate:modelValue":s[2]||(s[2]=i=>t.data.name=i),onBlur:oe,ref_key:"inputText",ref:T,placeholder:"\u8BF7\u586B\u5199\u6587\u4EF6\u540D\u79F0"},null,8,["modelValue"])],40,Re),[[V,k.value]])])],2)],42,ue)]),_:1})):(c(),X(M,{key:1,span:24,class:m(["file-table-tr",{dragAction:g.value,dragOverAction:v.value}]),onMouseover:s[5]||(s[5]=i=>t.data.checkBox=!0),onMouseleave:s[6]||(s[6]=i=>t.data.checkBox=!1),draggable:!t.showCheck,onDragover:$,onDragstart:P,onDragend:L,onDragleave:z,onDrop:H},{default:u(()=>[t.showCheck?(c(),d("div",{key:0,class:m(["check-mask",{check:t.data.check}]),onClick:f(w,["stop"])},null,10,Ee)):b("",!0),e("div",Ve,[t.data.checkBox||t.showCheck?(c(),d("div",{key:0,class:m(["file-check",{check:t.data.check}]),onClick:f(w,["stop"])},[n(r,{class:"icon"},{default:u(()=>[n(D)]),_:1})],10,Te)):b("",!0),e("div",{class:"file-cover",style:B({backgroundImage:"url(https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg)"})},null,4),e("div",Ae,[e("div",Ne,[$e,e("span",ze,Y(t.data.name),1)]),e("div",Pe,[v.value?(c(),d("span",Le,"\u6DFB\u52A0\u4E3A\u65B0\u7248\u672C")):(c(),d("span",He,"0\u6761\u8BC4\u8BBA"))])])]),Ge,Ue,We,Xe,Ye,e("div",qe,[e("span",{ref_key:"popoverReference",ref:j},[n(r,null,{default:u(()=>[n(C)]),_:1})],512)])]),_:1},8,["class","draggable"])),n(R,{trigger:"click","virtual-triggering":"","virtual-ref":j.value,"popper-options":W(K)},{default:u(()=>[Je]),_:1},8,["virtual-ref","popper-options"])],64)}}};var et=re(Ke,[["__scopeId","data-v-25b80426"]]);export{et as default};
