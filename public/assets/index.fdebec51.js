import{a0 as q,g as s,r as a,a8 as V,o as y,i as I,j as e,w as l,a9 as k,U as b,c as C,m as L,t as K,V as P,L as w,R as F}from"./vendor.d1385716.js";import{e as S}from"./index.45f5150f.js";function O(c){return S({url:"/system/online/list",method:"get",params:c})}function Q(c){return S({url:"/system/online/"+c,method:"delete"})}const z={class:"app-container"},E=w("\u641C\u7D22"),A=w("\u91CD\u7F6E"),G=w("\u5F3A\u9000"),H=q({name:"Online"}),X=Object.assign(H,{setup(c){const{proxy:m}=F(),x=s([]),_=s(!0),f=s(0),i=s(1),d=s(10),r=s({ipaddr:void 0,userName:void 0});function v(){_.value=!0,O(r.value).then(n=>{x.value=n.rows,f.value=n.total,_.value=!1})}function p(){i.value=1,v()}function U(){m.resetForm("queryRef"),p()}function j(n){m.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5F3A\u9000\u540D\u79F0\u4E3A"'+n.userName+'"\u7684\u7528\u6237?').then(function(){return Q(n.tokenId)}).then(()=>{v(),m.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{})}return v(),(n,o)=>{const N=a("el-input"),g=a("el-form-item"),h=a("el-button"),B=a("el-form"),u=a("el-table-column"),D=a("el-table"),R=a("pagination"),T=V("hasPermi"),$=V("loading");return y(),I("div",z,[e(B,{model:r.value,ref:"queryRef",inline:!0,"label-width":"68px"},{default:l(()=>[e(g,{label:"\u767B\u5F55\u5730\u5740",prop:"ipaddr"},{default:l(()=>[e(N,{modelValue:r.value.ipaddr,"onUpdate:modelValue":o[0]||(o[0]=t=>r.value.ipaddr=t),placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5730\u5740",clearable:"",onKeyup:k(p,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(g,{label:"\u7528\u6237\u540D\u79F0",prop:"userName"},{default:l(()=>[e(N,{modelValue:r.value.userName,"onUpdate:modelValue":o[1]||(o[1]=t=>r.value.userName=t),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u79F0",clearable:"",onKeyup:k(p,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(g,null,{default:l(()=>[e(h,{type:"primary",icon:"Search",onClick:p},{default:l(()=>[E]),_:1}),e(h,{icon:"Refresh",onClick:U},{default:l(()=>[A]),_:1})]),_:1})]),_:1},8,["model"]),b((y(),C(D,{data:x.value.slice((i.value-1)*d.value,i.value*d.value),style:{width:"100%"}},{default:l(()=>[e(u,{label:"\u5E8F\u53F7",width:"50",type:"index",align:"center"},{default:l(t=>[L("span",null,K((i.value-1)*d.value+t.$index+1),1)]),_:1}),e(u,{label:"\u4F1A\u8BDD\u7F16\u53F7",align:"center",prop:"tokenId","show-overflow-tooltip":!0}),e(u,{label:"\u767B\u5F55\u540D\u79F0",align:"center",prop:"userName","show-overflow-tooltip":!0}),e(u,{label:"\u4E3B\u673A",align:"center",prop:"ipaddr","show-overflow-tooltip":!0}),e(u,{label:"\u767B\u5F55\u65F6\u95F4",align:"center",prop:"loginTime",width:"180"},{default:l(t=>[L("span",null,K(n.parseTime(t.row.loginTime)),1)]),_:1}),e(u,{label:"\u64CD\u4F5C",align:"center","class-name":"small-padding fixed-width"},{default:l(t=>[b((y(),C(h,{type:"text",icon:"Delete",onClick:J=>j(t.row)},{default:l(()=>[G]),_:2},1032,["onClick"])),[[T,["monitor:online:forceLogout"]]])]),_:1})]),_:1},8,["data"])),[[$,_.value]]),b(e(R,{total:f.value,page:i.value,"onUpdate:page":o[2]||(o[2]=t=>i.value=t),limit:d.value,"onUpdate:limit":o[3]||(o[3]=t=>d.value=t)},null,8,["total","page","limit"]),[[P,f.value>0]])])}}});export{X as default};
