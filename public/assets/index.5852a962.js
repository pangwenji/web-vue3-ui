var Pe=Object.defineProperty;var le=Object.getOwnPropertySymbols;var Te=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var te=(y,v,d)=>v in y?Pe(y,v,{enumerable:!0,configurable:!0,writable:!0,value:d}):y[v]=d,ae=(y,v)=>{for(var d in v||(v={}))Te.call(v,d)&&te(y,d,v[d]);if(le)for(var d of le(v))qe.call(v,d)&&te(y,d,v[d]);return y};import{a0 as Ge,s as Ee,g,a7 as Re,a3 as De,r as p,a8 as ne,o as i,i as f,U as b,V as ue,j as e,w as o,k as a,a9 as Je,v as T,x as q,c as j,m as N,L as s,t as k,l as A,R as Le}from"./vendor.d1385716.js";import{l as Be,c as Fe,r as ze,g as se,u as Ke,a as Oe,d as Qe}from"./job.d60f78d2.js";import"./index.45f5150f.js";const Ae={class:"app-container"},He=s("\u641C\u7D22"),Me=s("\u91CD\u7F6E"),We=s("\u65B0\u589E"),Xe=s("\u4FEE\u6539"),Ye=s("\u5220\u9664"),Ze=s("\u5BFC\u51FA"),eo=s("\u65E5\u5FD7"),oo=s(" \u8C03\u7528\u65B9\u6CD5 "),lo=N("div",null,[s(" Bean\u8C03\u7528\u793A\u4F8B\uFF1AryTask.ryParams('ry') "),N("br"),s("Class\u7C7B\u8C03\u7528\u793A\u4F8B\uFF1Acom.ruoyi.quartz.task.RyTask.ryParams('ry') "),N("br"),s("\u53C2\u6570\u8BF4\u660E\uFF1A\u652F\u6301\u5B57\u7B26\u4E32\uFF0C\u5E03\u5C14\u7C7B\u578B\uFF0C\u957F\u6574\u578B\uFF0C\u6D6E\u70B9\u578B\uFF0C\u6574\u578B ")],-1),to=s(" \u751F\u6210\u8868\u8FBE\u5F0F "),ao=N("i",{class:"el-icon-time el-icon--right"},null,-1),no=s("\u7ACB\u5373\u6267\u884C"),uo=s("\u6267\u884C\u4E00\u6B21"),so=s("\u653E\u5F03\u6267\u884C"),io=s("\u5141\u8BB8"),ro=s("\u7981\u6B62"),po={class:"dialog-footer"},co=s("\u786E \u5B9A"),_o=s("\u53D6 \u6D88"),mo={key:0},fo={key:1},bo={key:0},vo={key:1},go={key:0},ho={key:1},jo={key:2},yo={key:3},Vo={class:"dialog-footer"},ko=s("\u5173 \u95ED"),wo=Ge({name:"Job"}),Uo=Object.assign(wo,{setup(y){const v=Ee(),{proxy:d}=Le(),{sys_job_group:I,sys_job_status:H}=d.useDict("sys_job_group","sys_job_status"),M=g([]),w=g(!1),G=g(!0),E=g(!0),R=g([]),W=g(!0),X=g(!0),D=g(0),J=g(""),P=g(!1),de=g(!1),ie=g(""),re=Re({form:{},queryParams:{pageNum:1,pageSize:10,jobName:void 0,jobGroup:void 0,status:void 0},rules:{jobName:[{required:!0,message:"\u4EFB\u52A1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],invokeTarget:[{required:!0,message:"\u8C03\u7528\u76EE\u6807\u5B57\u7B26\u4E32\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],cronExpression:[{required:!0,message:"cron\u6267\u884C\u8868\u8FBE\u5F0F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{queryParams:m,form:n,rules:pe}=De(re);function C(){G.value=!0,Be(m.value).then(u=>{M.value=u.rows,D.value=u.total,G.value=!1})}function ce(u,t){return d.selectDictLabel(I.value,u.jobGroup)}function _e(){w.value=!1,L()}function L(){n.value={jobId:void 0,jobName:void 0,jobGroup:void 0,invokeTarget:void 0,cronExpression:void 0,misfirePolicy:1,concurrent:1,status:"0"},d.resetForm("jobRef")}function B(){m.value.pageNum=1,C()}function me(){d.resetForm("queryRef"),B()}function fe(u){R.value=u.map(t=>t.jobId),W.value=u.length!=1,X.value=!u.length}function be(u){let t=u.status==="0"?"\u542F\u7528":"\u505C\u7528";d.$modal.confirm('\u786E\u8BA4\u8981"'+t+'""'+u.jobName+'"\u4EFB\u52A1\u5417?').then(function(){return Fe(u.jobId,u.status)}).then(()=>{d.$modal.msgSuccess(t+"\u6210\u529F")}).catch(function(){u.status=u.status==="0"?"1":"0"})}function ve(u){d.$modal.confirm('\u786E\u8BA4\u8981\u7ACB\u5373\u6267\u884C\u4E00\u6B21"'+u.jobName+'"\u4EFB\u52A1\u5417?').then(function(){return ze(u.jobId,u.jobGroup)}).then(()=>{d.$modal.msgSuccess("\u6267\u884C\u6210\u529F")}).catch(()=>{})}function ge(u){se(u.jobId).then(t=>{n.value=t.data,P.value=!0})}function he(){ie.value=n.value.cronExpression,de.value=!0}function Y(u){const t=u.jobId||0;v.push({path:"/monitor/job-log/index",query:{jobId:t}})}function je(){L(),w.value=!0,J.value="\u6DFB\u52A0\u4EFB\u52A1"}function Z(u){L();const t=u.jobId||R.value;se(t).then(S=>{n.value=S.data,w.value=!0,J.value="\u4FEE\u6539\u4EFB\u52A1"})}function ye(){d.$refs.jobRef.validate(u=>{u&&(n.value.jobId!=null?Ke(n.value).then(t=>{d.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),w.value=!1,C()}):Oe(n.value).then(t=>{d.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),w.value=!1,C()}))})}function ee(u){const t=u.jobId||R.value;d.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u5B9A\u65F6\u4EFB\u52A1\u7F16\u53F7\u4E3A"'+t+'"\u7684\u6570\u636E\u9879?').then(function(){return Qe(t)}).then(()=>{C(),d.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{})}function Ve(){d.download("schedule/job/export",ae({},m.value),`job_${new Date().getTime()}.xlsx`)}return C(),(u,t)=>{const S=p("el-input"),r=p("el-form-item"),F=p("el-option"),z=p("el-select"),_=p("el-button"),K=p("el-form"),c=p("el-col"),ke=p("right-toolbar"),O=p("el-row"),V=p("el-table-column"),we=p("dict-tag"),Ce=p("el-switch"),U=p("el-tooltip"),xe=p("el-table"),Ne=p("pagination"),Se=p("question-filled"),Ue=p("el-icon"),$=p("el-radio-button"),Q=p("el-radio-group"),$e=p("el-radio"),oe=p("el-dialog"),h=ne("hasPermi"),Ie=ne("loading");return i(),f("div",Ae,[b(e(K,{model:a(m),ref:"queryRef",inline:!0,"label-width":"68px"},{default:o(()=>[e(r,{label:"\u4EFB\u52A1\u540D\u79F0",prop:"jobName"},{default:o(()=>[e(S,{modelValue:a(m).jobName,"onUpdate:modelValue":t[0]||(t[0]=l=>a(m).jobName=l),placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u540D\u79F0",clearable:"",onKeyup:Je(B,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(r,{label:"\u4EFB\u52A1\u7EC4\u540D",prop:"jobGroup"},{default:o(()=>[e(z,{modelValue:a(m).jobGroup,"onUpdate:modelValue":t[1]||(t[1]=l=>a(m).jobGroup=l),placeholder:"\u8BF7\u9009\u62E9\u4EFB\u52A1\u7EC4\u540D",clearable:""},{default:o(()=>[(i(!0),f(T,null,q(a(I),l=>(i(),j(F,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"\u4EFB\u52A1\u72B6\u6001",prop:"status"},{default:o(()=>[e(z,{modelValue:a(m).status,"onUpdate:modelValue":t[2]||(t[2]=l=>a(m).status=l),placeholder:"\u8BF7\u9009\u62E9\u4EFB\u52A1\u72B6\u6001",clearable:""},{default:o(()=>[(i(!0),f(T,null,q(a(H),l=>(i(),j(F,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(r,null,{default:o(()=>[e(_,{type:"primary",icon:"Search",onClick:B},{default:o(()=>[He]),_:1}),e(_,{icon:"Refresh",onClick:me},{default:o(()=>[Me]),_:1})]),_:1})]),_:1},8,["model"]),[[ue,E.value]]),e(O,{gutter:10,class:"mb8"},{default:o(()=>[e(c,{span:1.5},{default:o(()=>[b((i(),j(_,{type:"primary",plain:"",icon:"Plus",onClick:je},{default:o(()=>[We]),_:1})),[[h,["monitor:job:add"]]])]),_:1},8,["span"]),e(c,{span:1.5},{default:o(()=>[b((i(),j(_,{type:"success",plain:"",icon:"Edit",disabled:W.value,onClick:Z},{default:o(()=>[Xe]),_:1},8,["disabled"])),[[h,["monitor:job:edit"]]])]),_:1},8,["span"]),e(c,{span:1.5},{default:o(()=>[b((i(),j(_,{type:"danger",plain:"",icon:"Delete",disabled:X.value,onClick:ee},{default:o(()=>[Ye]),_:1},8,["disabled"])),[[h,["monitor:job:remove"]]])]),_:1},8,["span"]),e(c,{span:1.5},{default:o(()=>[b((i(),j(_,{type:"warning",plain:"",icon:"Download",onClick:Ve},{default:o(()=>[Ze]),_:1})),[[h,["monitor:job:export"]]])]),_:1},8,["span"]),e(c,{span:1.5},{default:o(()=>[b((i(),j(_,{type:"info",plain:"",icon:"Operation",onClick:Y},{default:o(()=>[eo]),_:1})),[[h,["monitor:job:query"]]])]),_:1},8,["span"]),e(ke,{showSearch:E.value,"onUpdate:showSearch":t[3]||(t[3]=l=>E.value=l),onQueryTable:C},null,8,["showSearch"])]),_:1}),b((i(),j(xe,{data:M.value,onSelectionChange:fe},{default:o(()=>[e(V,{type:"selection",width:"55",align:"center"}),e(V,{label:"\u4EFB\u52A1\u7F16\u53F7",width:"100",align:"center",prop:"jobId"}),e(V,{label:"\u4EFB\u52A1\u540D\u79F0",align:"center",prop:"jobName","show-overflow-tooltip":!0}),e(V,{label:"\u4EFB\u52A1\u7EC4\u540D",align:"center",prop:"jobGroup"},{default:o(l=>[e(we,{options:a(I),value:l.row.jobGroup},null,8,["options","value"])]),_:1}),e(V,{label:"\u8C03\u7528\u76EE\u6807\u5B57\u7B26\u4E32",align:"center",prop:"invokeTarget","show-overflow-tooltip":!0}),e(V,{label:"cron\u6267\u884C\u8868\u8FBE\u5F0F",align:"center",prop:"cronExpression","show-overflow-tooltip":!0}),e(V,{label:"\u72B6\u6001",align:"center"},{default:o(l=>[e(Ce,{modelValue:l.row.status,"onUpdate:modelValue":x=>l.row.status=x,"active-value":"0","inactive-value":"1",onChange:x=>be(l.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(V,{label:"\u64CD\u4F5C",align:"center",width:"200","class-name":"small-padding fixed-width"},{default:o(l=>[e(U,{content:"\u4FEE\u6539",placement:"top"},{default:o(()=>[b(e(_,{type:"text",icon:"Edit",onClick:x=>Z(l.row)},null,8,["onClick"]),[[h,["monitor:job:edit"]]])]),_:2},1024),e(U,{content:"\u5220\u9664",placement:"top"},{default:o(()=>[b(e(_,{type:"text",icon:"Delete",onClick:x=>ee(l.row)},null,8,["onClick"]),[[h,["monitor:job:remove"]]])]),_:2},1024),e(U,{content:"\u6267\u884C\u4E00\u6B21",placement:"top"},{default:o(()=>[b(e(_,{type:"text",icon:"CaretRight",onClick:x=>ve(l.row)},null,8,["onClick"]),[[h,["monitor:job:changeStatus"]]])]),_:2},1024),e(U,{content:"\u4EFB\u52A1\u8BE6\u7EC6",placement:"top"},{default:o(()=>[b(e(_,{type:"text",icon:"View",onClick:x=>ge(l.row)},null,8,["onClick"]),[[h,["monitor:job:query"]]])]),_:2},1024),e(U,{content:"\u8C03\u5EA6\u65E5\u5FD7",placement:"top"},{default:o(()=>[b(e(_,{type:"text",icon:"Operation",onClick:x=>Y(l.row)},null,8,["onClick"]),[[h,["monitor:job:query"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[Ie,G.value]]),b(e(Ne,{total:D.value,page:a(m).pageNum,"onUpdate:page":t[4]||(t[4]=l=>a(m).pageNum=l),limit:a(m).pageSize,"onUpdate:limit":t[5]||(t[5]=l=>a(m).pageSize=l),onPagination:C},null,8,["total","page","limit"]),[[ue,D.value>0]]),e(oe,{title:J.value,modelValue:w.value,"onUpdate:modelValue":t[13]||(t[13]=l=>w.value=l),width:"800px","append-to-body":""},{footer:o(()=>[N("div",po,[e(_,{type:"primary",onClick:ye},{default:o(()=>[co]),_:1}),e(_,{onClick:_e},{default:o(()=>[_o]),_:1})])]),default:o(()=>[e(K,{ref:"jobRef",model:a(n),rules:a(pe),"label-width":"120px"},{default:o(()=>[e(O,null,{default:o(()=>[e(c,{span:12},{default:o(()=>[e(r,{label:"\u4EFB\u52A1\u540D\u79F0",prop:"jobName"},{default:o(()=>[e(S,{modelValue:a(n).jobName,"onUpdate:modelValue":t[6]||(t[6]=l=>a(n).jobName=l),placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:o(()=>[e(r,{label:"\u4EFB\u52A1\u5206\u7EC4",prop:"jobGroup"},{default:o(()=>[e(z,{modelValue:a(n).jobGroup,"onUpdate:modelValue":t[7]||(t[7]=l=>a(n).jobGroup=l),placeholder:"\u8BF7\u9009\u62E9"},{default:o(()=>[(i(!0),f(T,null,q(a(I),l=>(i(),j(F,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(c,{span:24},{default:o(()=>[e(r,{prop:"invokeTarget"},{label:o(()=>[N("span",null,[oo,e(U,{placement:"top"},{content:o(()=>[lo]),default:o(()=>[e(Ue,null,{default:o(()=>[e(Se)]),_:1})]),_:1})])]),default:o(()=>[e(S,{modelValue:a(n).invokeTarget,"onUpdate:modelValue":t[8]||(t[8]=l=>a(n).invokeTarget=l),placeholder:"\u8BF7\u8F93\u5165\u8C03\u7528\u76EE\u6807\u5B57\u7B26\u4E32"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:24},{default:o(()=>[e(r,{label:"cron\u8868\u8FBE\u5F0F",prop:"cronExpression"},{default:o(()=>[e(S,{modelValue:a(n).cronExpression,"onUpdate:modelValue":t[9]||(t[9]=l=>a(n).cronExpression=l),placeholder:"\u8BF7\u8F93\u5165cron\u6267\u884C\u8868\u8FBE\u5F0F"},{append:o(()=>[e(_,{type:"primary",onClick:he},{default:o(()=>[to,ao]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(c,{span:24},{default:o(()=>[e(r,{label:"\u6267\u884C\u7B56\u7565",prop:"misfirePolicy"},{default:o(()=>[e(Q,{modelValue:a(n).misfirePolicy,"onUpdate:modelValue":t[10]||(t[10]=l=>a(n).misfirePolicy=l)},{default:o(()=>[e($,{label:"1"},{default:o(()=>[no]),_:1}),e($,{label:"2"},{default:o(()=>[uo]),_:1}),e($,{label:"3"},{default:o(()=>[so]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:o(()=>[e(r,{label:"\u662F\u5426\u5E76\u53D1",prop:"concurrent"},{default:o(()=>[e(Q,{modelValue:a(n).concurrent,"onUpdate:modelValue":t[11]||(t[11]=l=>a(n).concurrent=l)},{default:o(()=>[e($,{label:"0"},{default:o(()=>[io]),_:1}),e($,{label:"1"},{default:o(()=>[ro]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:o(()=>[e(r,{label:"\u72B6\u6001"},{default:o(()=>[e(Q,{modelValue:a(n).status,"onUpdate:modelValue":t[12]||(t[12]=l=>a(n).status=l)},{default:o(()=>[(i(!0),f(T,null,q(a(H),l=>(i(),j($e,{key:l.value,label:l.value},{default:o(()=>[s(k(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),e(oe,{title:"\u4EFB\u52A1\u8BE6\u7EC6",modelValue:P.value,"onUpdate:modelValue":t[15]||(t[15]=l=>P.value=l),width:"700px","append-to-body":""},{footer:o(()=>[N("div",Vo,[e(_,{onClick:t[14]||(t[14]=l=>P.value=!1)},{default:o(()=>[ko]),_:1})])]),default:o(()=>[e(K,{model:a(n),"label-width":"120px"},{default:o(()=>[e(O,null,{default:o(()=>[e(c,{span:12},{default:o(()=>[e(r,{label:"\u4EFB\u52A1\u7F16\u53F7\uFF1A"},{default:o(()=>[s(k(a(n).jobId),1)]),_:1}),e(r,{label:"\u4EFB\u52A1\u540D\u79F0\uFF1A"},{default:o(()=>[s(k(a(n).jobName),1)]),_:1})]),_:1}),e(c,{span:12},{default:o(()=>[e(r,{label:"\u4EFB\u52A1\u5206\u7EC4\uFF1A"},{default:o(()=>[s(k(ce(a(n))),1)]),_:1}),e(r,{label:"\u521B\u5EFA\u65F6\u95F4\uFF1A"},{default:o(()=>[s(k(a(n).createTime),1)]),_:1})]),_:1}),e(c,{span:12},{default:o(()=>[e(r,{label:"cron\u8868\u8FBE\u5F0F\uFF1A"},{default:o(()=>[s(k(a(n).cronExpression),1)]),_:1})]),_:1}),e(c,{span:12},{default:o(()=>[e(r,{label:"\u4E0B\u6B21\u6267\u884C\u65F6\u95F4\uFF1A"},{default:o(()=>[s(k(u.parseTime(a(n).nextValidTime)),1)]),_:1})]),_:1}),e(c,{span:24},{default:o(()=>[e(r,{label:"\u8C03\u7528\u76EE\u6807\u65B9\u6CD5\uFF1A"},{default:o(()=>[s(k(a(n).invokeTarget),1)]),_:1})]),_:1}),e(c,{span:12},{default:o(()=>[e(r,{label:"\u4EFB\u52A1\u72B6\u6001\uFF1A"},{default:o(()=>[a(n).status==0?(i(),f("div",mo,"\u6B63\u5E38")):a(n).status==1?(i(),f("div",fo,"\u5931\u8D25")):A("",!0)]),_:1})]),_:1}),e(c,{span:12},{default:o(()=>[e(r,{label:"\u662F\u5426\u5E76\u53D1\uFF1A"},{default:o(()=>[a(n).concurrent==0?(i(),f("div",bo,"\u5141\u8BB8")):a(n).concurrent==1?(i(),f("div",vo,"\u7981\u6B62")):A("",!0)]),_:1})]),_:1}),e(c,{span:12},{default:o(()=>[e(r,{label:"\u6267\u884C\u7B56\u7565\uFF1A"},{default:o(()=>[a(n).misfirePolicy==0?(i(),f("div",go,"\u9ED8\u8BA4\u7B56\u7565")):a(n).misfirePolicy==1?(i(),f("div",ho,"\u7ACB\u5373\u6267\u884C")):a(n).misfirePolicy==2?(i(),f("div",jo,"\u6267\u884C\u4E00\u6B21")):a(n).misfirePolicy==3?(i(),f("div",yo,"\u653E\u5F03\u6267\u884C")):A("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});export{Uo as default};
